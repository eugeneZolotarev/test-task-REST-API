# REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ—Ç–∞–ª—è–º–∏ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏

–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–µ–µ —Å–æ–±–æ–π REST API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–µ–¥–µ–Ω–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –¥–µ—Ç–∞–ª–µ–π –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å, —á–∏—Ç–∞—Ç—å, –æ–±–Ω–æ–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö, –∞ —Ç–∞–∫–∂–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –¥–µ—Ç–∞–ª–µ–π.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

*   **Java 21**
*   **Spring Boot 4.0.2** (Web, Data JPA, Validation)
*   **PostgreSQL** (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
*   **Docker & Docker Compose** (–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è)
*   **Lombok** (–£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞)
*   **OpenAPI / Swagger** (–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
*   **JUnit 5 & Mockito** (–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

## üóÇ –°—É—â–Ω–æ—Å—Ç–∏

### 1. –ú–∞—Ç–µ—Ä–∏–∞–ª (Material)
–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –¥–µ—Ç–∞–ª–∏.
*   **–ü–æ–ª—è:** –ù–∞–∑–≤–∞–Ω–∏–µ, –ü–ª–æ—Ç–Ω–æ—Å—Ç—å, –ú–æ–¥—É–ª—å —É–ø—Ä—É–≥–æ—Å—Ç–∏.
*   **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º.

### 2. –î–µ—Ç–∞–ª—å (Detail)
–û—Å–Ω–æ–≤–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.
*   **–ü–æ–ª—è:** –ù–∞–∑–≤–∞–Ω–∏–µ, –î–µ—Ü–∏–º–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä (—Ñ–æ—Ä–º–∞—Ç `–ê–ë–í–ì.123456.789`), –í–µ—Å, –°—Ç–∞—Ç—É—Å, –°—Å—ã–ª–∫–∞ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª.
*   **–°—Ç–∞—Ç—É—Å—ã:** `IN_DESIGN` (–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ), `READY` (–ì–æ—Ç–æ–≤–æ), `ARCHIVED` (–í –∞—Ä—Ö–∏–≤–µ) –∏ –¥—Ä.
*   **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –î–µ—Ü–∏–º–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —É–Ω–∏–∫–∞–ª–µ–Ω. –ù–µ–ª—å–∑—è –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å –¥–µ—Ç–∞–ª–∏, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤–µ.

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ **Docker** –∏ **Docker Compose**.

1.  –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.
2.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É –∏ —Å—Ç–∞—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```bash
docker-compose up -d --build
```

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:
*   **API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** `http://localhost:8081`
*   **Swagger UI:** `http://localhost:8081/swagger-ui/index.html`
*   **pgAdmin (GUI –¥–ª—è –ë–î):** `http://localhost:5050`
    *   *Email:* `admin@admin.com`
    *   *Password:* `admin`

## üìö API –ú–µ—Ç–æ–¥—ã

### –î–µ—Ç–∞–ª–∏ (`/api/v1/details`)
*   `POST /` ‚Äî –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –¥–µ—Ç–∞–ª—å.
*   `GET /` ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–µ—Ç–∞–ª–µ–π (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é).
*   `GET /{id}` ‚Äî –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å –ø–æ ID.
*   `PATCH /{id}` ‚Äî –ß–∞—Å—Ç–∏—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–µ—Ç–∞–ª–∏.
*   `PATCH /{id}/status` ‚Äî –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –¥–µ—Ç–∞–ª–∏ (–ø–∞—Ä–∞–º–µ—Ç—Ä `detailStatus`).

### –ú–∞—Ç–µ—Ä–∏–∞–ª—ã (`/api/v1/materials`)
*   `POST /` ‚Äî –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª.
*   `GET /` ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.
*   `GET /{id}` ‚Äî –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª –ø–æ ID.
*   `PATCH /{id}` ‚Äî –ß–∞—Å—Ç–∏—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞—Ç–µ—Ä–∏–∞–ª–µ.
*   `DELETE /{id}` ‚Äî –£–¥–∞–ª–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit-—Ç–µ—Å—Ç—ã
–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ (`DetailController`, `MaterialController`) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **JUnit 5** –∏ **Mockito**.
–¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API, –≤–∫–ª—é—á–∞—è:
*   –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ (200 OK, 201 Created, 204 No Content).
*   –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (400 Bad Request).
*   –û–±—Ä–∞–±–æ—Ç–∫—É –∏—Å–∫–ª—é—á–µ–Ω–∏–π "–Ω–µ –Ω–∞–π–¥–µ–Ω–æ" (404 Not Found) –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö (409 Conflict).

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```bash
mvn test
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Postman

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:

1.  **–ß–µ—Ä–µ–∑ Swagger UI:** –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ `http://localhost:8081/swagger-ui/index.html` –∏ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä—è–º–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞.
2.  **–ò–º–ø–æ—Ä—Ç –≤ Postman:**
    *   –û—Ç–∫—Ä–æ–π—Ç–µ Postman.
    *   –ù–∞–∂–º–∏—Ç–µ **Import**.
    *   –í—ã–±–µ—Ä–∏—Ç–µ **Link** –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –∞–¥—Ä–µ—Å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ OpenAPI: `http://localhost:8081/v3/api-docs`.
    *   Postman –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é —Å–æ –≤—Å–µ–º–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏.
